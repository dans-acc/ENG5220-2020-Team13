<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BeeSafe Project: doc/wiki/Build-Guide.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../beeSmall.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BeeSafe Project
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Low-cost tracking device.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/d14/_build-_guide_8md.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">doc/wiki/Build-Guide.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d14/_build-_guide_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Build guide</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;This guide explains all the necessary steps that need to be taken to be able to recreate, or build and install the BeeSafe project.</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;## Hardware</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;### Logging into the Raspberry Pi</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;When connected to the pi for the first time, if logging in as normal user the default login credentials are:</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;```</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;   username: pi</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;   password: raspberry</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;```</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;**Note** : The above and all commands further on are as user `pi`, NOT `root`. If `root`, leave `sudo`.</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;**Note** : To change the default settings and secure your Raspberry Pi, follow this article: https://www.raspberrypi.org/documentation/configuration/security.md</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;### Enable SSH</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;To set up SSH first, type</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;```</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;   sudo raspi-config</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;```</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;then select</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;```</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;   5 Interfacing options</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;```</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;then select</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;```</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;   P2 SSH</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;```</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;then press `Yes` for `Would you like SSH server to be enabled? `</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;&lt;br&gt;&lt;br&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;Then get you Pi&#39;s IP address by typing</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;```</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;   ifconfig</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;```</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;and note the address that goes something like `192.168.x.x`</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;### Remote Connection and Port Forwarding</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;**Note**: you might need to set up port forwarding on your router, for which you need to do the following:</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;&lt;ol&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;&lt;li&gt;Navigate to your routerâ€™s homepage in your browser, and log in (the address is usually `192.168.0.1`, but check with your router manufacturer/ISP)&lt;/li&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;&lt;li&gt;Find the page that handles security or port issues&lt;/li&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;&lt;li&gt;On that page, you&#39;ll see a list similar to the following. Add your Pi&#39;s IP address and a port or port range of your choosing, which people need to use when connecting to your Pi from outside your network:</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;table&gt;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  &lt;tr&gt;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    &lt;th colspan=&quot;2&quot;&gt;Local&lt;/th&gt;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    &lt;th colspan=&quot;2&quot;&gt;External&lt;/th&gt;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    &lt;th colspan=&quot;2&quot;&gt;&lt;/th&gt;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  &lt;/tr&gt;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  &lt;tr&gt;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    &lt;td&gt;IP address&lt;br&gt;&lt;/td&gt;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    &lt;td&gt;Port Range&lt;/td&gt;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    &lt;td&gt;Port Range&lt;br&gt;&lt;/td&gt;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    &lt;td&gt;Protocol&lt;/td&gt;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    &lt;td&gt;Enabled&lt;/td&gt;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    &lt;td&gt;Delete&lt;/td&gt;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  &lt;/tr&gt;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  &lt;tr&gt;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    &lt;td&gt;[PI IP address]&lt;/td&gt;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    &lt;td&gt;22-22&lt;/td&gt;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    &lt;td&gt;[port]-[port]&lt;br&gt;&lt;/td&gt;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    &lt;td&gt;TCP&lt;/td&gt;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    &lt;td&gt;Yes&lt;/td&gt;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    &lt;td&gt;&lt;/td&gt;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  &lt;/tr&gt;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;&lt;/table&gt;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;**Note** : This is only one example. For more information, check out the following article: &lt;a href=&quot;https://pimylifeup.com/raspberry-pi-port-forwarding/&quot;&gt;https://pimylifeup.com/raspberry-pi-port-forwarding/&lt;/a&gt; &lt;/li&gt;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;&lt;li&gt;Then save the settings and log out of your router.&lt;/li&gt;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;&lt;/ol&gt;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;On your laptop, install Putty (&lt;a href=&quot;https://www.putty.org/&quot;&gt;https://www.putty.org/&lt;/a&gt;), then open Putty and enter the IP address you noted down in the field &quot;Host Name or IP address&quot; and in the radio button menu below, select &quot;SSH&quot;. The port should automatically set to &quot;22&quot;, but if it does not, set it manually. Afterwards click &quot;Open&quot; to connect.</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;### Set up Wifi on the Pi</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;To set the wifi on your Pi, type </div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;```</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;```</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;and when the file opens, add your wifi credentials (network name and password) to the file. If connecting to a hidden network, add the line `scan_ssid=1` to the file at the end. It should look something like this:</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;```</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   network={</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;       ssid=&quot;name&quot;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;       psk=&quot;password&quot;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;       scan_ssid=1</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;```</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;To add multiple networks, just repeat the above for each, with a separate network item for each.</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;## Software</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;To build the software component of this project, take the following steps:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;### Create an account on Github</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;You can clone the repository without an account, however to push contributions, an account is required. You can do so on the following &lt;a href=&quot;https://github.com/join&quot;&gt;link&lt;/a&gt;.</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;### Installing dependencies</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;The following section explains how to install the dependencies.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;&gt; **Note** : If you already know your way around installing packages and setting up Git on Linux, just clone the BeeSafe repository from Github using `git clone https://github.com/itsBelinda/ENG5220-2020-Team13` , navigate into the repository, and in the root folder run the `installBeeSafe.sh` script. This installs all the required dependencies for the project that is described in the following 2 sections. You can skip ahead to the `Building the project` section now. </div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;&gt; &lt;br&gt; **Note:** For optional dependencies, you can choose to install them or not, by uncommenting or commenting them in the installation script.</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;&gt;**Note: this project uses a bootloader to install dependencies and run the software. If you wish to use that, please skip to the section `Bootloading` as the following chapters will describe how to build the project without the specified bootloader we included in the project repository.**</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;#### Before start</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;To install some of the necessary packages, carry out the following steps:</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;(to check what packages you already have installed, type: `apt list --installed` )</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;To ensure you have enough space on your pi, first type `df -h`, then you&#39;ll see a breakdown of filesystems and spaces used and available.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;&lt;br&gt;&lt;br&gt;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;#### Setting up</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;Then, if your pi is older or haven&#39;t been used in a while, use the following commands where deemed necessary:</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;**`sudo apt-get update`** : downloads the package lists from the repositories and &quot;updates&quot; them to get information on the newest versions of packages and their dependencies.</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;**`sudo apt-get upgrade`** : will fetch new versions of packages existing on the machine if APT knows about these new versions by way of apt-get update.</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;**`sudo apt-get dist-upgrade`** : will do the same job which is done by apt-get upgrade, plus it will also intelligently handle the dependencies, so it might remove obsolete packages or add new ones.</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;**Note** : To find out more which one you need and get a more thorough description, see: https://askubuntu.com/questions/222348/what-does-sudo-apt-get-update-do</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;#### Install Git</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;To get any packages e.g. from github, you&#39;ll need Git. To install Git, type</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;```</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   sudo apt-get install git</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;```</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;#### Install packages necessary for the project</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;To get started with C/C++ development, you can get the minimal necessary packages (gcc/g++: compilers, make: compilation utility, libc6-dev: GNU C library with development libraries and header files needed) by typing</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;```</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   sudo apt-get install build-essential</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;```</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;To recreate the program, you&#39;ll also need to install the following packages:</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;```</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   sudo apt-get install cmake openssl libcpprest-dev</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;```</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;(core packages to have the program running)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;```</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   sudo apt-get install flex bison doxygen graphviz libreadline6-dev lcov</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;```</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;(necessary packages necessary for Doxygen and Codecov)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;#### Install optional packages</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;A non-exaustive list of stuff you might need and/or are handy is the following:</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;```</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   sudo apt install screen npm</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;```</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;Screen can act as a serial terminal program to test the operations of the UART with, and npm can be used to install packages such as the github-wiki-sidebar with which you can create custom Github wiki sidebars.</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;#### Tidying up</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;Once you&#39;ve done installing packages, you can tidy up and clean the local repository of retrieved package files that are left in /var/cache by typing</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;```</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   sudo apt-get clean</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;```</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;### Setting up Git on the Pi</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;To configure your git to connect to your account, add your credentials by typing</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;```</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   git config --global user.name &quot;yourusername&quot;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   git config --global user.email &quot;youremail@email.com&quot;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;```</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;For more Git configuration options, check out the following link:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-config</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;### Clone the repository</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;To get the BeeSafe project, clone the Github repository by typing</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;```</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        git clone https://github.com/itsBelinda/ENG5220-2020-Team13`</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;```</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;### Enabling UART</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;The Raspberry Pi 3B used for this project (also RPi 4) has 2 options which can be used for UART communication, and they are currently used by the following services:</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;```</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   /dev/ttyAMA0 -&gt; Bluetooth</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   /dev/ttyS0 -&gt; GPIO serial</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;```</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;The choice is up for the implementer, but in this project we enabled ttyS0.</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;&lt;br&gt;&lt;br&gt;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;To get started with UART, you need to configure a few things before starting writing code. First, if you use RPi 3 and above, open the file</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;```</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   sudo nano /boot/config.txt</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;```</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;and if not already there, add the option</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;```</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   enable_uart=1</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;```</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;to the end of the file.</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;You will also need to disable Linux&#39;s console use of UART by typing</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;```</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   sudo raspi-config</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;```</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;then selecting</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;```</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   5 Interfacing Options</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;```</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;followed by selecting</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;```</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   P6 Serial</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;```</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;and then when asked &lt;i&gt;&quot;Would you like a login shell to be accessible over serial?&quot;&lt;/i&gt;, select</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;```</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   No</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;```</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;but when asked &lt;i&gt;&quot;Would you like the serial port hardware to be enabled?&quot;&lt;/i&gt;, select</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;```</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   Yes</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;```</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;then</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;```</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   OK</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;```</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;&lt;br&gt;&lt;br&gt;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;**Note: With this you set up UART communications on `ttyS0`. If you want it on `ttyAMA0`, continue with the following steps.**</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;&lt;br&gt; </div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;For enabling ttyAMA0, we also need to manually change the settings, so edit the kernel command line with</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;```</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   sudo nano /boot/cmdline.txt</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;```</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;, find the console entry that refers to the serial0 device, and remove it, including the baud rate setting. It will look something like</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;```</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   console=serial0,115200</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;```</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;**Note: This file must only contain 1 line, do not split the line when editing, and do not try to add comments to the file. Make sure the rest of the line remains the same, as errors in this configuration can stop the Raspberry Pi from booting.**</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;We also need to disable Bluetooth and restore ttyAMA0 to GPIOs 14 and 15, by typing</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;```</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   sudo systemctl disable hciuart</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;```</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;then navigating to</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;```</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   sudo nano /boot/config.txt</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;```</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;and adding the following to the end</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;```</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   dtoverlay=disable-bt</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;```</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;&lt;br&gt;&lt;br&gt;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;In some cases it might be necessary to disable the services running on these ports, since we are not using the serial ports for console, by typing:</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;```</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   sudo systemctl stop serial-getty@ttyAMA0.service</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   sudo systemctl disable serial-getty@ttyAMA0.service</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;```</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;and/or</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;```</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   sudo systemctl stop serial-getty@ttyS0.service</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   sudo systemctl disable serial-getty@ttyS0.service</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;```</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;&lt;br&gt;&lt;br&gt;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;You can make sure it worked by typing</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;```</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   dmesg | grep tty</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;```</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;and if you don&#39;t see </div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;```</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   console [ttyAMA0] enabled</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;```</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;or</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;```</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   console [ttyS0] enabled</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;```</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;but still see both ttyS0 and ttyAMA0 listed as serials;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;OR after typing</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;```</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   ls -l /dev</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;```</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;, at the entries for ttyAMA0 and ttyS0 you don&#39;t see a `serial0 -&gt;` or `serial1 -&gt;`, the operation has been successful.</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;**Note** : as with any significant change, reboot your Pi for changes to apply by typing</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;```</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   sudo reboot</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;```</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;### Building the project</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;Once the UART communication has been enabled on the PI, the project needs to be built to be ran. This can be done by navigating into the root folder of the project repository, and running the `buildBeeSafe.sh` script.</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;**Note** : If you want to test the project, uncomment the line that runs the tests in the build script.</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;It navigates into the build directory, runs CMake, then creates executables of the program by running make. Running CTest runs the executables of the tests to see if the code implementation is correct and it passes the specified tests.</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;### Bootloading</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;As this hardware requires the project to automatically run on the hardware (minimising the technical knowledge required by parents to set up), the build and run process is automated by the bootloader script that is included in the root folder of the project. This following section explains how to set up bootloading on a Raspberry Pi, specifically for this project. If you wish to understand the HOW and WHY behind the script, please refer back to the chapters above.</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;#### Creating a bootloader</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;To create the bootloader, there are a number of short steps to be taken that ensure that the service can run upon the detection of a network. This was designed with the fact that the device would need to be set up at home by the parent, to configure the home location/safe zone.</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;&lt;br&gt;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;* First, create your script, and compile it with a compiler of your choice.</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;* Then create a service for it by typing</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;```</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   sudo systemctl edit --force --full yourservicename.service</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;```</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;* </div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;Then create a service file for it by writing the following code:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;```</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   [Unit]</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   Description=My Systemd Test Service</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   Wants=network-online.target</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   After=network-online.target</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   </div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   [Service]</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   Type=simple</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   User=pi</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   WorkingDirectory=/home/pi</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   ExecStart=/home/pi/runname</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   </div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   [Install]</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   WantedBy=multi-user.target</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;```</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;* Once that&#39;s saved, ensure your service is in place</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;```</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   systemctl status yourservicename.service</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;```</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;* Then enable and start your service</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;```</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   sudo systemctl enable yourservicename.service</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   sudo systemctl start yourservicename.service</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;```</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;* To ensure all the changes are saved, type</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;```</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   sudo systemctl reboot</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;```</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;* If you need to edit your service file, type</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;```</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   sudo systemctl edit --full yourservicename.service</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;```</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;* and make sure you restart the service for changes to apply</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;```</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   sudo systemctl restart yourservicename.service</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;```</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;#### The bootloader script</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;To run the project via bootloader, follow the above guide. The script you should create is the runBeeSafe.sh file in the root repository of this project. If you clone the project from github, make sure you copy the script to the root home folder of the Pi user. After having set up the bootloader including the script name upon setup, the program will run every time the Pi is powered up and it detects internet connection.</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d2/d14/_build-_guide_8md.html">Build-Guide.md</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
